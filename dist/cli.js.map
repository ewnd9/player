{"version":3,"sources":["../libs/cli.js"],"names":[],"mappings":";;;;;;;;oBAAiB,MAAM;;;;wBACF,UAAU;;;;0BACZ,gBAAgB;;;;qBAEpB,YAAW;AACxB,MAAI,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;AAC7B,MAAI,CAAC,OAAO,EACV,OAAM;;AAER,MAAI,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAClC,MAAI,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAC9B,OAAM;;AAER,MAAI,MAAM,GAAG,4BAAW,MAAM,CAAC,KAAK,CAAC,CAAC,CAAA;;AAEtC,MAAI;AACF,UAAM,CAAC,OAAO,CAAC,EAAE,CAAA;GAClB,CAAC,OAAO,GAAG,EAAE;AACZ,WAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;GACjB;;AAED,WAAS,MAAM,CAAC,KAAK,EAAE;AACrB,WAAO,KAAK,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAK;AAC7B,UAAI,KAAK,CAAC,QAAQ,CAAC,EACjB,OAAO,QAAQ,CAAA;;AAEjB,aAAO,kBAAK,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC,CAAA;KAC1C,CAAC,CAAA;GACH;;AAED,WAAS,KAAK,CAAC,GAAG,EAAE;AAClB,QAAI,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,EACzD,OAAO,IAAI,CAAA;;AAEb,QAAI,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AAC7B,QAAI,SAAS,KAAK,GAAG,IAAI,SAAS,IAAI,GAAG,EACvC,OAAO,IAAI,CAAA;;AAEb,WAAO,KAAK,CAAA;GACb;;AAED,6BAAS,OAAO,CAAC,KAAK,CAAC,CAAC;;AAExB,SAAO,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,EAAE,EAAE,GAAG,EAAE;AAC9C,QAAI,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,EAAE;AACtC,aAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;KAChB;AACD,QAAI,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,OAAO,EAAE;AAC9B,YAAM,CAAC,KAAK,EAAE,CAAA;KACf;AACD,QAAI,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,EAAE;AAC1B,YAAM,CAAC,IAAI,EAAE,CAAA;KACd;AACD,QAAI,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,EAAE;AAC1B,YAAM,CAAC,IAAI,EAAE,CAAA;KACd;GACF,CAAC,CAAC;;AAEH,SAAO,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;AAC9B,SAAO,CAAC,KAAK,CAAC,MAAM,EAAE,CAAA;;AAEtB,SAAO,CAAC,GAAG,CAAC,uEAAuE,CAAC,CAAA;CACrF","file":"libs/cli.js","sourcesContent":["import path from 'path'\nimport keypress from 'keypress'\nimport Player from '../dist/player'\n\nexport default function() {\n  var command = process.argv[2]\n  if (!command)\n    return\n\n  var songs = process.argv.splice(3)\n  if (!songs || songs.length === 0)\n    return\n\n  var player = new Player(format(songs))\n\n  try {\n    player[command]()\n  } catch (err) {\n    console.log(err)\n  }\n\n  function format(songs) {\n    return songs.map((songPath) => {\n      if (isAbs(songPath))\n        return songPath\n\n      return path.join(process.cwd(), songPath)\n    })\n  }\n\n  function isAbs(str) {\n    if (str.indexOf('http') === 0 || str.indexOf('https') === 0)\n      return true\n\n    var beginWith = str.charAt(0)\n    if (beginWith === '~' || beginWith == '/')\n      return true\n\n    return false\n  }\n\n  keypress(process.stdin);\n\n  process.stdin.on('keypress', function (ch, key) {\n    if (key && key.ctrl && key.name == 'c') {\n      process.exit(0)\n    }\n    if (key && key.name == 'space') {\n      player.pause()\n    }\n    if (key && key.name == 'x') {\n      player.stop()\n    }\n    if (key && key.name == 's') {\n      player.play()\n    }\n  });\n\n  process.stdin.setRawMode(true)\n  process.stdin.resume()\n\n  console.log('press \"x\" to stop, press \"s\" to play, press \"space\" to pause / resume')\n}\n"]}